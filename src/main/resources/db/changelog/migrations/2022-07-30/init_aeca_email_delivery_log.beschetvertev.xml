<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.9.xsd">
    <changeSet id="init_aeca_email_delivery_log.beschetvertev.xml" author="pavel.beschetvertev">
        <comment>Создание таблицы журнала рассылки</comment>
        <createTable tableName="aeca_email_delivery_log"
                     remarks="Журнал рассылки">
            <column name="id"
                    type="bigint"
                    remarks="Идентификатор записи"
                    autoIncrement="true">
                <constraints primaryKey="true"
                             primaryKeyName="aeca_email_delivery_log_id_pkey"
                             nullable="false"
                             unique="true"/>
            </column>
            <column name="date_time"
                    type="datetime"
                    defaultValueComputed="now()"
                    remarks="Дата и время рассылки">
                <constraints nullable="false"/>
            </column>
            <column name="delivery_template_id"
                    type="bigint"
                    remarks="Ссылка на шаблон рассылки">
                <constraints nullable="false"
                             foreignKeyName="aeca_email_delivery_template_delivery_template_id_fkey"
                             referencedTableName="aeca_email_delivery_template"
                             referencedColumnNames="id"
                             deleteCascade="true"/>
            </column>
            <column name="certificate_fingerprint"
                    type="text"
                    remarks="Фингерпринт сертификата">
                <constraints nullable="false"/>
            </column>
            <column name="note"
                    type="text"
                    remarks="Примечание">
            </column>
        </createTable>
    </changeSet>
</databaseChangeLog>